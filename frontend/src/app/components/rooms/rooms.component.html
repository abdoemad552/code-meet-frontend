<div
  *ngIf="rooms; else loading"
  class="h-full w-full flex flex-col p-10">
  <div class="flex justify-between items-center pb-6 mb-6 border-b border-gray-200">
    <h3 class="text-2xl font-bold text-gray-700 flex items-center gap-3">
      <svg
        class="rounded-xl bg-indigo-100 size-12 text-indigo-600 font-bold p-3"
        xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 6.75h12M8.25 12h12m-12 5.25h12M3.75 6.75h.007v.008H3.75V6.75Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0ZM3.75 12h.007v.008H3.75V12Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm-.375 5.25h.007v.008H3.75v-.008Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z" />
      </svg>
      Rooms ({{rooms.length}})
    </h3>
    <div class="controls flex gap-2">
      <button
        (click)="onShowCreateRoomModal()"
        type="button"
        class="flex cursor-pointer rounded-full px-4 py-2 text-md font-medium bg-indigo-500 hover:bg-indigo-700 active:bg-indigo-800 text-white justify-center transition-colors gap-2">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
          <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
        </svg>
        Create room
      </button>
      <button
        type="button"
        (click)="onShowJoinRoomModal()"
        class="flex cursor-pointer rounded-full px-4 py-2 text-md font-medium bg-indigo-500 hover:bg-indigo-700 active:bg-indigo-800 text-white justify-center transition-colors gap-2">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
          <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 9V5.25A2.25 2.25 0 0 1 10.5 3h6a2.25 2.25 0 0 1 2.25 2.25v13.5A2.25 2.25 0 0 1 16.5 21h-6a2.25 2.25 0 0 1-2.25-2.25V15M12 9l3 3m0 0-3 3m3-3H2.25" />
        </svg>
        Join room
      </button>
      <button
        type="button"
        (click)="onShowInvitations()"
        class="flex cursor-pointer rounded-full px-4 py-2 text-md font-medium bg-indigo-500 hover:bg-indigo-700 active:bg-indigo-800 text-white justify-center transition-colors gap-2">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
          <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 13.5h3.86a2.25 2.25 0 0 1 2.012 1.244l.256.512a2.25 2.25 0 0 0 2.013 1.244h3.218a2.25 2.25 0 0 0 2.013-1.244l.256-.512a2.25 2.25 0 0 1 2.013-1.244h3.859m-19.5.338V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18v-4.162c0-.224-.034-.447-.1-.661L19.24 5.338a2.25 2.25 0 0 0-2.15-1.588H6.911a2.25 2.25 0 0 0-2.15 1.588L2.35 13.177a2.25 2.25 0 0 0-.1.661Z" />
        </svg>
        Invitations
      </button>
    </div>
  </div>
  <div class="overflow-y-auto h-full w-full">
    <div class="border overflow-y-auto rounded-lg h-full w-full border-gray-200 px-6 py-6">
      <div *ngIf="rooms.length > 0; else noRooms">
        <div class="grid grid-cols-1 gap-4 lg:grid-cols-3 lg:gap-8">
          <div *ngFor="let room of rooms">
            <app-room-card
              [room]="room">
            </app-room-card>
          </div>
        </div>
      </div>
      <ng-template #noRooms>
        <div class="flex flex-col items-center justify-center text-gray-500 py-12 h-full">
          <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" fill="currentColor" class="bi bi-card-list mb-4" viewBox="0 0 16 16">
            <path d="M14.5 3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-13a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5zm-13-1A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2z"/>
            <path d="M5 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 5 8m0-2.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5m0 5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5m-1-5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0M4 8a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0m0 2.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0"/>
          </svg>
          <p class="text-lg font-medium">No Rooms</p>
        </div>
      </ng-template>
    </div>
  </div>
</div>

<ng-template #loading>
  <div class="h-full w-full flex flex-col animate-pulse p-10">
    <!-- Header Section Skeleton -->
    <div class="flex justify-between items-center pb-6 mb-6 border-b border-gray-200">
      <div class="flex items-center gap-3">
        <div class="rounded-xl bg-gray-200 size-12 p-3 text-indigo-600"></div>
        <div class="h-8 w-32 bg-gray-200 rounded"></div>
      </div>

      <!-- Buttons Skeleton -->
      <div class="controls flex gap-2">
        <div class="h-10 w-100 bg-gray-200 rounded-full"></div>
      </div>
    </div>

    <!-- Rooms Grid Skeleton -->
    <div class="overflow-y-auto h-full w-full">
      <div class="border rounded-lg h-full w-full border-gray-200 px-6 py-6">
        <div class="grid grid-cols-1 gap-4 lg:grid-cols-3 lg:gap-8">
          <!-- Repeat skeleton cards (3 rows) -->
          <div *ngFor="let i of [1, 2, 3]">
            <div class="bg-white border border-gray-200 rounded-xl p-4 h-full">
              <div class="flex items-center gap-3">
                <div class="size-10 bg-gray-200 rounded-full"></div>
                <div class="flex-1 space-y-2">
                  <div class="h-4 bg-gray-200 rounded w-3/4"></div>
                  <div class="h-3 bg-gray-200 rounded w-1/2"></div>
                </div>
              </div>
              <div class="mt-4 space-y-2">
                <div class="h-3 bg-gray-200 rounded"></div>
                <div class="h-3 bg-gray-200 rounded w-5/6"></div>
              </div>
              <div class="mt-4 pt-4 border-t border-gray-100">
                <div class="h-8 bg-gray-200 rounded-full"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</ng-template>

<app-create-room
  *ngIf="showCreateRoomModal"
  (hideModal)="onHideCreateRoomModal()">
</app-create-room>

<app-join-room
  *ngIf="showJoinRoomModal"
  (hideModal)="onHideJoinRoomModal()">
</app-join-room>

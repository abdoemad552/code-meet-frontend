<div *ngIf="user; else loading">
  <div *ngIf="isOwner; else other">
    <div class="flex items-center justify-center">
      <div class="bg-white rounded-xl shadow-lg p-10 border w-full h-full border-gray-300">
        <a
          routerLink="/home"
          class="group flex items-center justify-center w-10 h-10 rounded-full hover:bg-indigo-50 hover:text-indigo-700 active:bg-indigo-100 text-white transition-colors">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke-width="2" class="w-6 h-6 stroke-indigo-800">
            <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5 8.25 12l7.5-7.5" />
          </svg>
        </a>

        <div class="mt-8 relative flex justify-center">
          <div *ngIf="user.profilePictureUrl; else svgIcon">
            <img
              [src]="user.profilePictureUrl"
              alt="Room Image"
              class="w-[150px] h-[150px] p-2 bg-indigo-50 rounded-full">
          </div>
          <ng-template #svgIcon>
            <svg
              class="w-[150px] h-[150px] text-indigo-500 bg-indigo-50 rounded-full"
              xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
              <path stroke-linecap="round" stroke-linejoin="round" d="M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"></path>
            </svg>
          </ng-template>
        </div>

        <div class="mt-4 relative flex justify-center">
      <span class="text-center text-2xl font-bold text-gray-700">
        {{ user.firstName }} {{user.lastName}}
      </span>
        </div>

        <div class="mt-2 relative flex justify-center">
      <span class="px-2 py-1 rounded-full text-center text-md font-semibold text-indigo-700 bg-indigo-50">
        &#64;{{ this.user.username }}
      </span>
        </div>

        <div class="mt-2 relative flex justify-center">
        <span class="text-gray-600 text-md text-center">
          {{ user.bio || "No Bio." }}
        </span>
        </div>

        <div class="mt-8 flex justify-between space-x-4">
          <button
            routerLink="/friends"
            type="button"
            class="cursor-pointer bg-indigo-500 hover:bg-indigo-700 active:bg-indigo-800 text-white px-4 py-2 rounded-full flex items-center justify-center flex-1 transition-colors gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-people-fill w-6 h-6" viewBox="0 0 16 16">
              <path d="M7 14s-1 0-1-1 1-4 5-4 5 3 5 4-1 1-1 1zm4-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6m-5.784 6A2.24 2.24 0 0 1 5 13c0-1.355.68-2.75 1.936-3.72A6.3 6.3 0 0 0 5 9c-4 0-5 3-5 4s1 1 1 1zM4.5 8a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5"/>
            </svg>
            Friends
          </button>

          <button
            (click)="showEditProfile()"
            type="button"
            class="cursor-pointer bg-indigo-500 hover:bg-indigo-700 active:bg-indigo-800 text-white px-4 py-2 rounded-full flex items-center justify-center flex-1 transition-colors gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pencil-square w-5 h-5" viewBox="0 0 16 16">
              <path d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"/>
              <path fill-rule="evenodd" d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5z"/>
            </svg>
            Edit profile
          </button>

          <button
            (click)="signOut()"
            class="cursor-pointer bg-red-500 hover:bg-red-700 active:bg-red-800 text-white px-4 py-2 rounded-full flex items-center justify-center flex-1 transition-colors gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-door-open-fill" viewBox="0 0 16 16">
              <path d="M1.5 15a.5.5 0 0 0 0 1h13a.5.5 0 0 0 0-1H13V2.5A1.5 1.5 0 0 0 11.5 1H11V.5a.5.5 0 0 0-.57-.495l-7 1A.5.5 0 0 0 3 1.5V15zM11 2h.5a.5.5 0 0 1 .5.5V15h-1zm-2.5 8c-.276 0-.5-.448-.5-1s.224-1 .5-1 .5.448.5 1-.224 1-.5 1"/>
            </svg>
            Sign Out
          </button>
        </div>

        <div class="flex justify-between items-center py-6 my-6 border-y border-gray-200">
          <h3 class="text-2xl font-bold text-gray-700 flex items-center gap-3">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="rounded-full bg-indigo-100 size-12 text-indigo-600 font-bold p-3" viewBox="0 0 16 16">
              <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16m.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2"/>
            </svg>
            Additional Info.
          </h3>

          <div class="controls flex gap-2">
            <button
              type="button"
              class="flex cursor-pointer rounded-full px-4 py-2 text-md font-medium bg-indigo-500 hover:bg-indigo-700 active:bg-indigo-800 text-white transition-colors gap-2">
              Button
            </button>
            <button
              type="button"
              class="flex cursor-pointer rounded-full px-4 py-2 text-md font-medium bg-indigo-500 hover:bg-indigo-700 active:bg-indigo-800 text-white transition-colors gap-2">
              Button
            </button>
          </div>
        </div>

        <!-- Additional Info. goes here. -->
        <div class="overflow-y-auto h-full w-full">
          <div class="border overflow-y-auto rounded-lg h-full w-full border-gray-200 px-6 py-6">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div>
                <label class="text-indigo-800 font-bold text-sm block mb-2 pl-3 select-none">Email</label>
                <input
                  type="text"
                  [value]="user.email"
                  readonly
                  class="rounded-md w-full text-md text-gray-700 border-2 border-gray-300 bg-gray-100 px-3 py-3 outline-none"
                  placeholder="Email">
              </div>

              <div>
                <label class="text-indigo-800 font-bold text-sm block mb-2 pl-3 select-none">Phone</label>
                <input
                  type="text"
                  [value]="user.phoneNumber"
                  readonly
                  class="rounded-md w-full text-md text-gray-800 border-2 border-gray-300 bg-gray-100 px-3 py-3 outline-none"
                  placeholder="Phone">
              </div>

              <div>
                <label class="text-indigo-800 font-bold text-sm block mb-2 pl-3 select-none">Website</label>
                <input
                  type="text"
                  [value]="user.gender || 'Male'"
                  readonly
                  class="rounded-md w-full text-md text-gray-800 border-2 border-gray-300 bg-gray-100 px-3 py-3 outline-none"
                  placeholder="Website URL">
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <ng-template #other>
    <div class="flex items-center justify-center">
      <div class="bg-white rounded-xl shadow-lg p-10 border w-full h-full border-gray-300">
        <a
          routerLink="/home"
          class="group flex items-center justify-center w-10 h-10 rounded-full hover:bg-indigo-50 hover:text-indigo-700 active:bg-indigo-100 text-white transition-colors">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke-width="2" class="w-6 h-6 stroke-indigo-800">
            <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5 8.25 12l7.5-7.5" />
          </svg>
        </a>

        <div class="mt-8 relative flex justify-center">
          <div *ngIf="user.profilePictureUrl; else svgIcon">
            <img
              [src]="user.profilePictureUrl"
              alt="Room Image"
              class="w-[150px] h-[150px] p-2 bg-indigo-50 rounded-full">
          </div>
          <ng-template #svgIcon>
            <svg
              class="w-[150px] h-[150px] text-indigo-500 bg-indigo-50 rounded-full"
              xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
              <path stroke-linecap="round" stroke-linejoin="round" d="M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"></path>
            </svg>
          </ng-template>
        </div>

        <div class="mt-4 relative flex justify-center">
      <span class="text-center text-2xl font-bold text-gray-700">
        {{ user.firstName }} {{user.lastName}}
      </span>
        </div>

        <div class="mt-2 relative flex justify-center">
      <span class="px-2 py-1 rounded-full text-center text-md font-semibold text-indigo-700 bg-indigo-50">
        &#64;{{ this.user.username }}
      </span>
        </div>

        <div class="mt-2 relative flex justify-center">
      <span class="text-gray-600 text-md text-center">
        {{ user.bio || "No Bio." }}
      </span>
        </div>

        <div class="mt-8 flex justify-between space-x-4">
          <button
            type="button"
            class="cursor-pointer bg-indigo-500 hover:bg-indigo-700 active:bg-indigo-800 text-white px-4 py-2 rounded-full flex items-center justify-center flex-1 transition-colors gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-people-fill w-6 h-6" viewBox="0 0 16 16">
              <path d="M7 14s-1 0-1-1 1-4 5-4 5 3 5 4-1 1-1 1zm4-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6m-5.784 6A2.24 2.24 0 0 1 5 13c0-1.355.68-2.75 1.936-3.72A6.3 6.3 0 0 0 5 9c-4 0-5 3-5 4s1 1 1 1zM4.5 8a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5"/>
            </svg>
            Friends
          </button>

          <button
            type="button"
            class="cursor-pointer bg-indigo-500 hover:bg-indigo-700 active:bg-indigo-800 text-white px-4 py-2 rounded-full flex items-center justify-center flex-1 transition-colors gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pencil-square w-5 h-5" viewBox="0 0 16 16">
              <path d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"/>
              <path fill-rule="evenodd" d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5z"/>
            </svg>
            Edit profile
          </button>
        </div>

        <div class="flex justify-between items-center py-6 my-6 border-y border-gray-200">
          <h3 class="text-2xl font-bold text-gray-700 flex items-center gap-3">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="rounded-full bg-indigo-100 size-12 text-indigo-600 font-bold p-3" viewBox="0 0 16 16">
              <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16m.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2"/>
            </svg>
            Additional Info.
          </h3>
        </div>

        <!-- Additional Info. goes here. -->
        <div class="overflow-y-auto h-full w-full">
          <div class="border overflow-y-auto rounded-lg h-full w-full border-gray-200 px-6 py-6">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div>
                <label class="text-indigo-800 font-bold text-sm block mb-2 pl-3 select-none">Email</label>
                <input
                  type="text"
                  [value]="user.email"
                  readonly
                  class="rounded-md w-full text-md text-gray-700 border-2 border-gray-300 bg-gray-100 px-3 py-3 outline-none"
                  placeholder="Email">
              </div>

              <div>
                <label class="text-indigo-800 font-bold text-sm block mb-2 pl-3 select-none">Phone</label>
                <input
                  type="text"
                  [value]="user.phoneNumber"
                  readonly
                  class="rounded-md w-full text-md text-gray-800 border-2 border-gray-300 bg-gray-100 px-3 py-3 outline-none"
                  placeholder="Phone">
              </div>

              <div>
                <label class="text-indigo-800 font-bold text-sm block mb-2 pl-3 select-none">Website</label>
                <input
                  type="text"
                  [value]="user.gender || 'Male'"
                  readonly
                  class="rounded-md w-full text-md text-gray-800 border-2 border-gray-300 bg-gray-100 px-3 py-3 outline-none"
                  placeholder="Website URL">
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </ng-template>
</div>

<ng-template #loading>
  <div class="flex items-center justify-center">
    <div class="bg-white rounded-xl shadow-lg p-10 border w-full h-full border-gray-300">
      <!-- Back button skeleton -->
      <div class="group flex items-center justify-center w-10 h-10 rounded-full bg-gray-200 animate-pulse"></div>

      <!-- Profile picture skeleton -->
      <div class="mt-8 relative flex justify-center">
        <div class="w-[150px] h-[150px] bg-gray-200 rounded-full animate-pulse"></div>
      </div>

      <!-- Name skeleton -->
      <div class="mt-4 relative flex justify-center">
        <div class="h-8 w-48 bg-gray-200 rounded-md animate-pulse"></div>
      </div>

      <!-- Username skeleton -->
      <div class="mt-2 relative flex justify-center">
        <div class="h-6 w-32 bg-gray-200 rounded-full animate-pulse"></div>
      </div>

      <!-- Bio skeleton -->
      <div class="mt-2 relative flex justify-center w-full">
        <div class="h-5 w-3/4 bg-gray-200 rounded-md animate-pulse"></div>
      </div>

      <!-- Button group skeleton -->
      <div class="mt-8 flex justify-between space-x-4">
        <div class="h-12 flex-1 bg-gray-200 rounded-full animate-pulse"></div>
        <div class="h-12 flex-1 bg-gray-200 rounded-full animate-pulse"></div>
        <div class="h-12 flex-1 bg-gray-200 rounded-full animate-pulse"></div>
      </div>

      <!-- Additional info header skeleton -->
      <div class="flex justify-between items-center py-6 my-6 border-y border-gray-200">
        <div class="flex items-center gap-3">
          <div class="size-12 bg-gray-200 rounded-full animate-pulse"></div>
          <div class="h-8 w-32 bg-gray-200 rounded-md animate-pulse"></div>
        </div>
        <div class="flex gap-2">
          <div class="h-10 w-20 bg-gray-200 rounded-full animate-pulse"></div>
          <div class="h-10 w-20 bg-gray-200 rounded-full animate-pulse"></div>
        </div>
      </div>

      <!-- Form fields skeleton -->
      <div class="overflow-y-auto h-full w-full">
        <div class="border overflow-y-auto rounded-lg h-full w-full border-gray-200 px-6 py-6">
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div>
              <div class="h-5 w-16 bg-gray-200 rounded-md mb-2 animate-pulse"></div>
              <div class="h-12 w-full bg-gray-200 rounded-md animate-pulse"></div>
            </div>
            <div>
              <div class="h-5 w-16 bg-gray-200 rounded-md mb-2 animate-pulse"></div>
              <div class="h-12 w-full bg-gray-200 rounded-md animate-pulse"></div>
            </div>
            <div>
              <div class="h-5 w-16 bg-gray-200 rounded-md mb-2 animate-pulse"></div>
              <div class="h-12 w-full bg-gray-200 rounded-md animate-pulse"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</ng-template>

<app-profile-edit
  (hideEditProfile)="hideEditProfile()"
  *ngIf="editProfileShown">
</app-profile-edit>

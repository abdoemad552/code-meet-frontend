<div class="flex items-center">
  <span class="pr-2 font-medium text-md text-gray-700">{{ label }}</span>
  <div class="relative" #dropdownContainer>
    <button
      (click)="toggleDropdown()"
      type="button"
      class="flex items-center justify-between w-40 px-4 py-2 font-medium text-md shadow-sm text-white transition-all duration-200 rounded-full bg-purple-700 hover:bg-purple-800 active:bg-purple-900 focus:outline-none cursor-pointer"
      id="menu-button"
      aria-expanded="true"
      aria-haspopup="true">
      <span class="truncate">{{ selectedOptionLabel }}</span> <!-- Using displayButtonText here -->
      <svg
        class="w-5 h-5 ml-auto transition-transform duration-200"
        [class.rotate-180]="isOpen"
        xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
        <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"/>
      </svg>
    </button>

    <div
      *ngIf="isOpen"
      class="absolute right-0 z-10 w-40 mt-1 overflow-hidden transition-all duration-200 origin-top transform bg-gray-800 rounded-lg shadow-lg"
      @dropdownAnimation>
      <button
        *ngFor="let option of options"
        (click)="selectOption(option)"
        class="w-full px-4 py-2 font-medium text-md text-left text-gray-200 transition-colors duration-150 hover:bg-indigo-600 hover:text-white cursor-pointer"
        role="menuitem"
        tabindex="-1"
        [class.bg-indigo-700]="option.value === selectedOption"
        [class.text-white]="option.value === selectedOption">
        {{ option.label }}
      </button>
    </div>
  </div>
</div>
